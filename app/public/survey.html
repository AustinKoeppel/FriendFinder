<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinder</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <style>
        .dudal{
            z-index: 101;
            position: absolute;
            display:none;
            left: 19%;
        }
    </style>
</head>

<body>

  <div class="container">

    <h2>Survey Questions</h2>
    <hr>

    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4>Age</h4>
    <input type="number" id="age" class="form-control">
    <hr>

    <h3>Question 1</h3>
    <h4>Will Ferrel is the greatest actor of all time.</h4>
    <select class="chosen-select" id="1">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Can't Agree More)</option>
    </select>
    <h3>Question 2</h3>
    <h4>Will ferrel is the worst actor of all time</h4>
    <select class="chosen-select" id="2">
      <option value="1">1 (Strongly disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Shut your fricken mouth)</option>
    </select>
    <h3>Question 3</h3>
    <h4>Step Brothers is the greatest film in history.</h4>
    <select class="chosen-select" id="3">
      <option value="1">1 (Next to anchorman it is)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Uh.. yeah)</option>
    </select>
    <h3>Question 4</h3>
    <h4>The other guys is the greatest film of all time</h4>
    <select class="chosen-select" id="4">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I own eight copies of it)</option>
    </select>
    <h3>Question 5</h3>
    <h4>This is question 5</h4>
    <select class="chosen-select" id="5">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Yes)</option>
    </select>
    <h3>Question 6</h3>
    <h4>John C. Reilly deserves the best supporting actor Oscar every year</h4>
    <select class="chosen-select" id="6">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Can't Agree More)</option>
    </select>
    <h3>Question 7</h3>
    <h4>Will ferrel is so funny he's made me pee myself.</h4>
    <select class="chosen-select" id="7">
      <option value="1">1 (Yes, but I won't admit it)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Fine you caught me)</option>
    </select>
    <h3>Question 8</h3>
    <h4>If I could be on a desert island I would take Will Ferrel</h4>
    <select class="chosen-select" id="8">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Can't Agree More)</option>
    </select>
    <h3>Question 9</h3>
    <h4>Just confirming, will Ferrel is the greates actor of all time.</h4>
    <select class="chosen-select" id="9">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Can't Agree More)</option>
    </select>
    <h3>Question 10</h3>
    <h4>This quiz was a good use of my time.</h4>
    <select class="chosen-select" id="10">
      <option value="1">1 (Strongly Agree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Seriously, I can't Agree More)</option>
    </select>
    <br>
    <br>

    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
        <i class="fa fa-check-circle" aria-hidden="true"></i>Submit
    </button>

    <hr>
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a></p>
      </div>
    </footer>

  </div>

  <div id="brodal" class="dudal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
        <div class="modal-body">
          <h2 id="match-name"></h2>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" id="closeBoy">Close</button>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">
    
    function SubmitData({name, age, scores}){
        this.name = name || "noname";
        this.age = age || "72";
        this.scores = scores || [1,1,1,1,1,1,1,1,1,1];
    } 

    function init() {
        document.getElementById("closeBoy").onclick = hider;
        document.getElementById("submit").onclick = clickBoi;
    }

    function hider() {
        document.getElementById("brodal").style.display = "none";
    }

    function clickBoi(event) {
        event.preventDefault();

        let queryURL = './api/friends';

        let submitData = new SubmitData({
            name: document.getElementById("name").value,
            age: document.getElementById("age").value,
            scores: [
                document.getElementById("1").value,
                document.getElementById("2").value,
                document.getElementById("3").value,
                document.getElementById("4").value,
                document.getElementById("5").value,
                document.getElementById("6").value,
                document.getElementById("7").value,
                document.getElementById("8").value,
                document.getElementById("9").value,
                document.getElementById("10").value
            ]
        });
            
        
        $.ajax({
                url: queryURL,
                method:"POST",
                data:submitData
        }).then(function(response){
            console.log(response);
            let y = document.getElementById("submit").getBoundingClientRect().bottom;
            document.getElementById("match-name").innerHTML = response;
            document.getElementById("brodal").style.top = window.pageYOffset + 'px';
            document.getElementById("brodal").style.display = "inline";
        });
    }
    init();
  </script>

</body>

</html>